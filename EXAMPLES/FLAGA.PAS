uses supergfx;

const
     flaga : array[0..19, 0..19] of byte =
     ((15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15),
      (15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15),
      (15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15),
      (15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15),
      (15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15),
      (15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15),
      (15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15),
      (15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15),
      (15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15),
      (15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15),
      (12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12),
      (12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12),
      (12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12),
      (12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12),
      (12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12),
      (12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12),
      (12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12),
      (12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12),
      (12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12),
      (12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12));

type ptext = array[0..20,0..20] of byte;

var plasma:^ptext;
    sinus:array[0..255] of byte;
    x,y,f:integer;
    i:word;

procedure draw(f:byte);
var a,b,c:byte;
    x,y:integer;
begin
 i:=0;
 for y:=0 to 199 do
  for x:=0 to 319 do
  begin
   a:=x+sinus[100];
   b:=y+sinus[a];
   bufor^[i]:=plasma^[2+b shr 4,a shr 4];
   inc(i);
  end;
end;

procedure makesin(power:real);
begin
 for i:=0 to 255 do
  sinus[i]:=round(20+power*sin(2*pi*i/128));
end;

begin
initgfx13h;
new(plasma);
for i:= 0 to 64 do setcolor(i,i,i,i);
for x:=0 to 19 do
for y:=0 to 19 do
flaga[x,y]:=(x xor y) + 10;
for x:=0 to 127 do
for y:=0 to 127 do
plasma^[x,y]:=flaga[x,y];
repeat
 makesin(10*sin(2*pi*f/64));
 draw(f);
 pokazgrafike;
 inc(f);
until keypressed;
dispose(plasma);
closegfx13h;
end.